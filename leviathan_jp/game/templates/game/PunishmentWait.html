{% extends "otree/WaitPage.html" %}
{% load otree static %}

{% block title %}
    待機中...
{% endblock %}

{% block body_main %}
<style>
    html,
    body {
        margin: 0;
        width: 100%;
        height: 100%;
    }

    body {
        background: transparent;
        color: #f1f1f1;
    }

    .otree-wait-page {
        position: fixed;
        inset: 0;
        left: 0;
        top: 0;
        width: 100vw !important;
        height: 100vh !important;
        max-width: none !important;
        margin: 0 !important;
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
        background:
            radial-gradient(circle at 10% 10%, rgba(80, 110, 170, 0.15), transparent 55%),
            radial-gradient(circle at 90% 0%, rgba(226, 182, 69, 0.12), transparent 50%),
            linear-gradient(180deg, #3b3b3b 0%, #2f2f2f 100%);
    }

    .otree-title {
        display: none;
    }

    .otree-body {
        max-width: none;
        width: 100%;
        padding: 0;
    }

    .wait-panel {
        pointer-events: auto;
        width: fit-content;
        max-width: 92vw;
        background: #353535;
        border: 1px solid #5a5a5a;
        color: #f1f1f1;
        border-radius: 2px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.8rem 1.4rem;
        box-sizing: border-box;
    }

    .wait-panel p {
        margin: 0;
        width: auto;
        white-space: nowrap;
        text-align: center;
        line-height: 1.35;
        color: #f1f1f1;
        box-sizing: border-box;
    }

    @media (max-width: 900px) {
        .wait-panel {
            max-width: 92vw;
        }
        .wait-panel p {
            white-space: normal;
            text-align: center;
        }
    }
</style>
<div class="otree-wait-page">
    <div class="wait-panel">
        <p>現在は罰フェーズです。他の参加者がDPの入力を終えるまで、お待ちください。（{{ waiting_progress }}/{{ waiting_total }} 名が完了）</p>
    </div>
</div>
{% if waiting_progress < waiting_total %}
<script>
    setTimeout(function () {
        window.location.reload();
    }, 2000);
</script>
{% endif %}
{% endblock %}
